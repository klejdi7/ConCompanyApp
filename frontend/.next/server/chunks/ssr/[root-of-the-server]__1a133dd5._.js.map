{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\nimport { createContext, useContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\ninterface AuthContextType {\n  token: string | null;\n  user: User | null;\n  login: (token: string) => Promise<void>;\n  logout: () => void;\n  loading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  token: null,\n  user: null,\n  login: async () => {},\n  logout: () => {},\n  loading: true,\n});\n\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\n  const [token, setToken] = useState<string | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem(\"token\");\n    if (storedToken) {\n      setToken(storedToken);\n      fetchUser(storedToken).finally(() => setLoading(false));\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const fetchUser = async (jwt: string) => {\n    try {\n      const res = await axios.get(\"http://localhost:4000/api/me\", {\n        headers: { Authorization: `Bearer ${jwt}` },\n      });\n      setUser(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch user:\", err);\n      logout();\n    }\n  };\n\n  const login = async (newToken: string) => {\n    localStorage.setItem(\"token\", newToken);\n    setToken(newToken);\n    await fetchUser(newToken);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    setToken(null);\n    setUser(null);\n    window.location.href = \"/login\";\n  };\n\n  return (\n    <AuthContext.Provider value={{ token, user, login, logout, loading }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAFA;;;;AAkBA,MAAM,4BAAc,IAAA,sNAAa,EAAkB;IACjD,OAAO;IACP,MAAM;IACN,OAAO,WAAa;IACpB,QAAQ,KAAO;IACf,SAAS;AACX;AAEO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,IAAI,aAAa;YACf,SAAS;YACT,UAAU,aAAa,OAAO,CAAC,IAAM,WAAW;QAClD,OAAO;YACL,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,YAAY,OAAO;QACvB,IAAI;YACF,MAAM,MAAM,MAAM,gJAAK,CAAC,GAAG,CAAC,gCAAgC;gBAC1D,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,KAAK;gBAAC;YAC5C;YACA,QAAQ,IAAI,IAAI;QAClB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC;QACF;IACF;IAEA,MAAM,QAAQ,OAAO;QACnB,aAAa,OAAO,CAAC,SAAS;QAC9B,SAAS;QACT,MAAM,UAAU;IAClB;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,SAAS;QACT,QAAQ;QACR,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAM;YAAO;YAAQ;QAAQ;kBAChE;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,IAAA,mNAAU,EAAC","debugId":null}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useState, useEffect } from \"react\";\n\nexport default function Navbar() {\nconst { user, logout } = useAuth();\nconst [mounted, setMounted] = useState(false);\n\nuseEffect(() => {\n\tsetMounted(true);\n}, []);\n\nif (!mounted) {\n\treturn <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark px-3\" />;\n}\n\nreturn (\n\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark px-3\">\n\t\t{/* Brand */}\n\t\t<Link href=\"/\" className=\"navbar-brand\">\n\t\t\tConstruction App\n\t\t</Link>\n\n\t\t{/* Toggler for mobile */}\n\t\t<button\n\t\t\tclassName=\"navbar-toggler\"\n\t\t\ttype=\"button\"\n\t\t\tdata-bs-toggle=\"collapse\"\n\t\t\tdata-bs-target=\"#navbarContent\"\n\t\t\taria-controls=\"navbarContent\"\n\t\t\taria-expanded=\"false\"\n\t\t\taria-label=\"Toggle navigation\"\n\t\t>\n\t\t\t<span className=\"navbar-toggler-icon\"></span>\n\t\t</button>\n\n\t\t{/* Collapsible content */}\n\t\t<div className=\"collapse navbar-collapse\" id=\"navbarContent\">\n\t\t\t<ul className=\"navbar-nav me-auto\">\n\t\t\t{user && (\n\t\t\t\t<>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<Link href=\"/employees\" className=\"nav-link\">\n\t\t\t\t\tEmployees\n\t\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<Link href=\"/projects\" className=\"nav-link\">\n\t\t\t\t\tProjects\n\t\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<Link href=\"/invoices\" className=\"nav-link\">\n\t\t\t\t\tInvoices\n\t\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t</ul>\n\n\t\t\t<ul className=\"navbar-nav ms-auto\">\n\t\t\t{user ? (\n\t\t\t\t<li className=\"nav-item dropdown\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn btn-outline-light dropdown-toggle\"\n\t\t\t\t\tid=\"userDropdown\"\n\t\t\t\t\tdata-bs-toggle=\"dropdown\"\n\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t>\n\t\t\t\t\t{user.name}\n\t\t\t\t</button>\n\t\t\t\t<ul className=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"userDropdown\">\n\t\t\t\t\t<li>\n\t\t\t\t\t<Link className=\"dropdown-item\" href=\"/settings\">\n\t\t\t\t\t\tSettings\n\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t<button className=\"dropdown-item text-danger\" onClick={logout}>\n\t\t\t\t\t\tLogout\n\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t) : (\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t<Link href=\"/login\" className=\"btn btn-outline-primary\">\n\t\t\t\t\tLogin\n\t\t\t\t</Link>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t</ul>\n\t\t</div>\n\t</nav>\n);\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACxB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAO;IAChC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACT,WAAW;IACZ,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACb,qBAAO,8OAAC;YAAI,WAAU;;;;;;IACvB;IAEA,qBACC,8OAAC;QAAI,WAAU;;0BAEd,8OAAC,uKAAI;gBAAC,MAAK;gBAAI,WAAU;0BAAe;;;;;;0BAKxC,8OAAC;gBACA,WAAU;gBACV,MAAK;gBACL,kBAAe;gBACf,kBAAe;gBACf,iBAAc;gBACd,iBAAc;gBACd,cAAW;0BAEX,cAAA,8OAAC;oBAAK,WAAU;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;gBAA2B,IAAG;;kCAC5C,8OAAC;wBAAG,WAAU;kCACb,sBACA;;8CACA,8OAAC;oCAAG,WAAU;8CACb,cAAA,8OAAC,uKAAI;wCAAC,MAAK;wCAAa,WAAU;kDAAW;;;;;;;;;;;8CAI9C,8OAAC;oCAAG,WAAU;8CACb,cAAA,8OAAC,uKAAI;wCAAC,MAAK;wCAAY,WAAU;kDAAW;;;;;;;;;;;8CAI7C,8OAAC;oCAAG,WAAU;8CACb,cAAA,8OAAC,uKAAI;wCAAC,MAAK;wCAAY,WAAU;kDAAW;;;;;;;;;;;;;;;;;;kCAQ9C,8OAAC;wBAAG,WAAU;kCACb,qBACA,8OAAC;4BAAG,WAAU;;8CACd,8OAAC;oCACA,WAAU;oCACV,IAAG;oCACH,kBAAe;oCACf,iBAAc;8CAEb,KAAK,IAAI;;;;;;8CAEX,8OAAC;oCAAG,WAAU;oCAAkC,mBAAgB;;sDAC/D,8OAAC;sDACD,cAAA,8OAAC,uKAAI;gDAAC,WAAU;gDAAgB,MAAK;0DAAY;;;;;;;;;;;sDAIjD,8OAAC;sDACD,cAAA,8OAAC;gDAAO,WAAU;gDAA4B,SAAS;0DAAQ;;;;;;;;;;;;;;;;;;;;;;iDAOhE,8OAAC;4BAAG,WAAU;sCACd,cAAA,8OAAC,uKAAI;gCAAC,MAAK;gCAAS,WAAU;0CAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS5D","debugId":null}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/app/layout.tsx"],"sourcesContent":["'use client'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { AuthProvider } from '../context/AuthContext'; // âœ… Wrap app\nimport Navbar from '../components/Navbar';\nimport { useEffect } from 'react';\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\nuseEffect(() => {\n\t// @ts-ignore\n\timport('bootstrap/dist/js/bootstrap.bundle.min.js');\n}, []);\n\nreturn (\n\t<html lang=\"en\">\n\t\t<body>\n\t\t\t<AuthProvider>\n\t\t\t\t<Navbar />\n\t\t\t\t<main>{children}</main>\n\t\t\t</AuthProvider>\n\t\t</body>\n\t</html>\n);\n}\n"],"names":[],"mappings":";;;;;AAEA,8NAAuD,aAAa;AACpE;AACA;AAJA;;;;;;AAMe,SAAS,WAAW,EAAE,QAAQ,EAAiC;IAC9E,IAAA,kNAAS,EAAC;QACT,aAAa;;IAEd,GAAG,EAAE;IAEL,qBACC,8OAAC;QAAK,MAAK;kBACV,cAAA,8OAAC;sBACA,cAAA,8OAAC,8IAAY;;kCACZ,8OAAC,uIAAM;;;;;kCACP,8OAAC;kCAAM;;;;;;;;;;;;;;;;;;;;;;AAKX","debugId":null}}]
}