{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/hooks/useAuthGuard.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * Reusable hook to protect pages from unauthorized access.\n * Redirects to /not_authorized if user is not logged in.\n */\nexport const useAuthGuard = () => {\n  const { user } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!user) {\n      router.push(\"/not_authorized\");\n    }\n  }, [user, router]);\n\n  return { user };\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAUO,MAAM,eAAe;IAC1B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IACxB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,OAAO;QAAE;IAAK;AAChB","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/app/employees/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useAuthGuard } from \"../../hooks/useAuthGuard\";\nimport axios from \"axios\";\n\ninterface Employee {\n\tid: number;\n\tname: string;\n\tlastName: string;\n\trate: number;\n\tworkDays: number;\n}\n\nexport default function EmployeesPage() {\n\tconst { token } = useAuth();\n\tconst [employees, setEmployees] = useState<Employee[]>([]);\n\tconst [modalEmployee, setModalEmployee] = useState<Employee | null>(null);\n\tconst [isEdit, setIsEdit] = useState(false);\n\tconst { user } = useAuthGuard();\n\n\tif (!user) {\n\t\treturn <p>Redirecting...</p>;\n\t}\n\n\tconst fetchEmployees = async () => {\n\t\tif (!token) return;\n\t\ttry {\n\t\tconst res = await axios.get(\"http://localhost:4000/employees\", {\n\t\t\theaders: { Authorization: `Bearer ${token}` },\n\t\t});\n\t\tsetEmployees(res.data);\n\t\t} catch (err) {\n\t\tconsole.log(\"Failed to fetch employees\");\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchEmployees();\n\t}, [token]);\n\n\tconst handleSubmit = async (e: React.FormEvent) => {\n\t\te.preventDefault();\n\t\tif (!modalEmployee) return;\n\n\t\ttry {\n\t\tif (isEdit) {\n\t\t\tawait axios.put(\n\t\t\t`http://localhost:4000/employees/${modalEmployee.id}`,\n\t\t\tmodalEmployee,\n\t\t\t{ headers: { Authorization: `Bearer ${token}` } }\n\t\t\t);\n\t\t} else {\n\t\t\tawait axios.post(\n\t\t\t\"http://localhost:4000/employees\",\n\t\t\tmodalEmployee,\n\t\t\t{ headers: { Authorization: `Bearer ${token}` } }\n\t\t\t);\n\t\t}\n\t\tsetModalEmployee(null);\n\t\tfetchEmployees();\n\t\tconst modalEl = document.getElementById(\"employeeModal\");\n\t\tif (modalEl) (window as any).bootstrap.Modal.getInstance(modalEl)?.hide();\n\t\t} catch (err) {\n\t\talert(\"Failed to save employee\");\n\t\t}\n\t};\n\n\tconst handleDelete = async (id: number) => {\n\t\tif (!confirm(\"Are you sure?\")) return;\n\t\ttry {\n\t\tawait axios.delete(`http://localhost:4000/employees/${id}`, {\n\t\t\theaders: { Authorization: `Bearer ${token}` },\n\t\t});\n\t\tfetchEmployees();\n\t\t} catch (err) {\n\t\talert(\"Failed to delete employee\");\n\t\t}\n\t};\n\nreturn (\n\t<div className=\"container py-5\">\n\t\t<h2>Employees</h2>\n\t\t<button className=\"btn btn-success mb-3\" data-bs-toggle=\"modal\" data-bs-target=\"#employeeModal\" onClick={() => { setModalEmployee({ id: 0, name: \"\", lastName: \"\", rate: 0, workDays: 0 }); setIsEdit(false); }}> Add Employee </button>\n\t\t<table className=\"table table-striped\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Last Name</th>\n\t\t\t\t\t<th>Rate</th>\n\t\t\t\t\t<th>Work Days</th>\n\t\t\t\t\t<th>Actions</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{employees.map((emp) => (\n\t\t\t\t\t<tr key={emp.id}>\n\t\t\t\t\t\t<td>{emp.name}</td>\n\t\t\t\t\t\t<td>{emp.lastName}</td>\n\t\t\t\t\t\t<td>{emp.rate}</td>\n\t\t\t\t\t\t<td>{emp.workDays}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn btn-primary me-2\"\n\t\t\t\t\t\t\tdata-bs-toggle=\"modal\"\n\t\t\t\t\t\t\tdata-bs-target=\"#employeeModal\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetModalEmployee(emp);\n\t\t\t\t\t\t\t\tsetIsEdit(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={() => handleDelete(emp.id)}>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</tbody>\n\t\t</table>\n\n\t\t{/* Modal */}\n\t\t<div className=\"modal fade\" id=\"employeeModal\" tabIndex={-1} aria-hidden=\"true\">\n\t\t\t<div className=\"modal-dialog\">\n\t\t\t\t<form className=\"modal-content\" onSubmit={handleSubmit}>\n\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t<h5 className=\"modal-title\">{isEdit ? \"Edit\" : \"Add\"} Employee</h5>\n\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t\t\t\tvalue={modalEmployee?.name || \"\"}\n\t\t\t\t\t\t\tonChange={(e) => setModalEmployee((prev) => ({ ...prev!, name: e.target.value }))}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\tplaceholder=\"Last Name\"\n\t\t\t\t\t\t\tvalue={modalEmployee?.lastName || \"\"}\n\t\t\t\t\t\t\tonChange={(e) => setModalEmployee((prev) => ({ ...prev!, lastName: e.target.value }))}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\tplaceholder=\"Rate\"\n\t\t\t\t\t\t\tvalue={modalEmployee?.rate || 0}\n\t\t\t\t\t\t\tonChange={(e) => setModalEmployee((prev) => ({ ...prev!, rate: Number(e.target.value) }))}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\tplaceholder=\"Work Days\"\n\t\t\t\t\t\t\tvalue={modalEmployee?.workDays || 0}\n\t\t\t\t\t\t\tonChange={(e) => setModalEmployee((prev) => ({ ...prev!, workDays: Number(e.target.value) }))}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">\n\t\t\t\t\t\t\t{isEdit ? \"Save Changes\" : \"Add Employee\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 444, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}