{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/hooks/useAuthGuard.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * Reusable hook to protect pages from unauthorized access.\n * Redirects to /not_authorized if user is not logged in.\n */\nexport const useAuthGuard = () => {\n  const { user } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!user) {\n      router.push(\"/not_authorized\");\n    }\n  }, [user, router]);\n\n  return { user };\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAUO,MAAM,eAAe;IAC1B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yIAAO;IACxB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;YACT,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,OAAO;QAAE;IAAK;AAChB","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/app/invoices/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useAuthGuard } from \"../../hooks/useAuthGuard\";\nimport axios from \"axios\";\n\ninterface Invoice {\n  id: number;\n  projectId: number;\n  amount: number;\n  date: string;\n}\n\nexport default function InvoicesPage() {\n  const { token,  } = useAuth();\n  const [invoices, setInvoices] = useState<Invoice[]>([]);\n  const [modalInvoice, setModalInvoice] = useState<Invoice | null>(null);\n  const [isEdit, setIsEdit] = useState(false);\n  const { user } = useAuthGuard();\n\n  if (!user) {\n    return <p>Redirecting...</p>;\n  }\n\n  const fetchInvoices = async () => {\n    if (!token) return;\n    try {\n      const res = await axios.get(\"http://localhost:4000/invoices\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setInvoices(res.data);\n    } catch (err) {\n      alert(\"Failed to fetch invoices\");\n    }\n  };\n\n  useEffect(() => {\n    fetchInvoices();\n  }, [token]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!modalInvoice) return;\n\n    try {\n      if (isEdit) {\n        await axios.put(\n          `http://localhost:4000/invoices/${modalInvoice.id}`,\n          modalInvoice,\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n      } else {\n        await axios.post(\n          \"http://localhost:4000/invoices\",\n          modalInvoice,\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n      }\n      setModalInvoice(null);\n      fetchInvoices();\n      const modalEl = document.getElementById(\"invoiceModal\");\n      if (modalEl) (window as any).bootstrap.Modal.getInstance(modalEl)?.hide();\n    } catch (err) {\n      alert(\"Failed to save invoice\");\n    }\n  };\n\n  const handleDelete = async (id: number) => {\n    if (!confirm(\"Are you sure?\")) return;\n    try {\n      await axios.delete(`http://localhost:4000/invoices/${id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      fetchInvoices();\n    } catch (err) {\n      alert(\"Failed to delete invoice\");\n    }\n  };\n\n  return (\n    <div className=\"container py-5\">\n      <h2>Invoices {user && `- Welcome, ${user.name}`}</h2>\n      <button\n        className=\"btn btn-success mb-3\"\n        data-bs-toggle=\"modal\"\n        data-bs-target=\"#invoiceModal\"\n        onClick={() =>\n          setModalInvoice({ id: 0, projectId: 0, amount: 0, date: \"\" })\n        }\n      >\n        Add Invoice\n      </button>\n\n      <table className=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>Project ID</th>\n            <th>Amount</th>\n            <th>Date</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {invoices.map((inv) => (\n            <tr key={inv.id}>\n              <td>{inv.projectId}</td>\n              <td>{inv.amount}</td>\n              <td>{inv.date}</td>\n              <td>\n                <button\n                  className=\"btn btn-primary me-2\"\n                  data-bs-toggle=\"modal\"\n                  data-bs-target=\"#invoiceModal\"\n                  onClick={() => {\n                    setModalInvoice(inv);\n                    setIsEdit(true);\n                  }}\n                >\n                  Edit\n                </button>\n                <button className=\"btn btn-danger\" onClick={() => handleDelete(inv.id)}>\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {/* Modal */}\n      <div className=\"modal fade\" id=\"invoiceModal\" tabIndex={-1} aria-hidden=\"true\">\n        <div className=\"modal-dialog\">\n          <form className=\"modal-content\" onSubmit={handleSubmit}>\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\">{isEdit ? \"Edit\" : \"Add\"} Invoice</h5>\n              <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n            </div>\n            <div className=\"modal-body\">\n              <input\n                type=\"number\"\n                className=\"form-control mb-2\"\n                placeholder=\"Project ID\"\n                value={modalInvoice?.projectId || 0}\n                onChange={(e) =>\n                  setModalInvoice((prev) => ({ ...prev!, projectId: Number(e.target.value) }))\n                }\n                required\n              />\n              <input\n                type=\"number\"\n                className=\"form-control mb-2\"\n                placeholder=\"Amount\"\n                value={modalInvoice?.amount || 0}\n                onChange={(e) =>\n                  setModalInvoice((prev) => ({ ...prev!, amount: Number(e.target.value) }))\n                }\n                required\n              />\n              <input\n                type=\"date\"\n                className=\"form-control mb-2\"\n                value={modalInvoice?.date || \"\"}\n                onChange={(e) =>\n                  setModalInvoice((prev) => ({ ...prev!, date: e.target.value }))\n                }\n                required\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n                Close\n              </button>\n              <button type=\"submit\" className=\"btn btn-primary\">\n                {isEdit ? \"Save Changes\" : \"Add Invoice\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 413, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}