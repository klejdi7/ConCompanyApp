{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/hooks/useAuthGuard.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * Reusable hook to protect pages from unauthorized access.\n * Redirects to /not_authorized if user is not logged in.\n */\n\nexport const useAuthGuard = () => {\n\tconst { user, loading } = useAuth();\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tif (!loading && !user) {\n\t\trouter.push(\"/not_authorized\");\n\t\t}\n\t}, [user, loading, router]);\n\n\treturn { user, loading };\n};"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAWO,MAAM,eAAe;;IAC3B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAO;IACjC,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACT,IAAI,CAAC,WAAW,CAAC,MAAM;gBACvB,OAAO,IAAI,CAAC;YACZ;QACD;iCAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,OAAO;QAAE;QAAM;IAAQ;AACxB;GAXa;;QACc,4IAAO;QAClB,kJAAS","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/components/EmployeeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport api from \"@/services/api\";\n\nexport interface Role {\n\tid: number;\n\tname: string;\n}\n\nexport interface Employee {\n\tid: number;\n\tfirstName: string;\n\tlastName: string;\n\trole?: Role;\n\troleId?: number;\n\troleName?: string;\n}\n\ninterface EmployeeModalProps {\n\temployee?: Employee | null;\n\tmode?: \"add\" | \"edit\" | \"delete\";\n\tonSubmit: (employee?: Employee) => void; // delete doesn't need data\n\tbuttonText?: React.ReactNode;\n\tclassName?: string;\n}\n\nexport default function EmployeeModal({\n\temployee,\n\tmode = \"add\",\n\tonSubmit,\n\tbuttonText,\n\tclassName = \"btn btn-primary mb-3\",\n}: EmployeeModalProps) {\n\tconst [showModal, setShowModal] = useState(false);\n\tconst [modalEmployee, setModalEmployee] = useState<Employee>(\n\t\temployee || { id: 0, firstName: \"\", lastName: \"\", roleId: 0, roleName: \"\" }\n\t);\n\tconst [fadeIn, setFadeIn] = useState(false);\n\tconst [roles, setRoles] = useState<Role[]>([]);\n\tconst [showNewRoleInput, setShowNewRoleInput] = useState(false);\n\tconst [loadingRoles, setLoadingRoles] = useState(false);\n\n\t// Fetch roles when modal opens\n\tuseEffect(() => {\n\t\tif (showModal) {\n\t\t\tfetchAllRoles();\n\t\t}\n\t}, [showModal]);\n\n\tconst fetchAllRoles = async () => {\n\t\tsetLoadingRoles(true);\n\t\ttry {\n\t\t\tconst response = await api.get('/api/roles');\n\t\t\tsetRoles(response.data);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to fetch roles:\", err);\n\t\t\talert(\"Failed to load roles. Please try again later.\");\n\t\t} finally {\n\t\t\tsetLoadingRoles(false);\n\t\t}\n\t};\n\n\t// Reset state when opening\n\tconst openModal = () => {\n\t\tif (mode === \"edit\" && employee) {\n\t\t\tsetModalEmployee({\n\t\t\t\t...employee,\n\t\t\t\troleId: employee.role?.id || 0,\n\t\t\t\troleName: \"\"\n\t\t\t});\n\t\t} else {\n\t\t\tsetModalEmployee({ id: 0, firstName: \"\", lastName: \"\", roleId: 0, roleName: \"\" });\n\t\t}\n\t\tsetShowNewRoleInput(false);\n\t\tsetShowModal(true);\n\t};\n\n\tconst closeModal = () => {\n\t\tsetFadeIn(false);\n\t\tsetTimeout(() => setShowModal(false), 300);\n\t};\n\n\t// fade-in animation\n\tuseEffect(() => {\n\t\tif (showModal) {\n\t\t\tsetTimeout(() => setFadeIn(true), 200);\n\t\t}\n\t}, [showModal]);\n\n\tconst handleRoleChange = useCallback((e: React.ChangeEvent<HTMLSelectElement>) => {\n\t\tconst value = e.target.value;\n\t\tif (value === \"new\") {\n\t\t\tsetShowNewRoleInput(true);\n\t\t\tsetModalEmployee({ ...modalEmployee, roleId: 0, roleName: \"\" });\n\t\t} else {\n\t\t\tsetShowNewRoleInput(false);\n\t\t\tsetModalEmployee({ ...modalEmployee, roleId: parseInt(value), roleName: \"\" });\n\t\t}\n\t}, [modalEmployee]);\n\n\tconst handleSubmit = useCallback((e?: React.FormEvent) => {\n\t\tif (e) e.preventDefault();\n\t\tif (mode === \"delete\") {\n\t\t\tonSubmit(employee!);\n\t\t} else {\n\t\t\tif (showNewRoleInput && !modalEmployee.roleName?.trim()) {\n\t\t\t\talert(\"Role name cannot be empty.\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSubmit(modalEmployee);\n\t\t}\n\t\tcloseModal();\n\t}, [employee, mode, modalEmployee, onSubmit, showNewRoleInput]);\n\n\treturn (\n\t\t<>\n\t\t\t{/* Open button */}\n\t\t\t<button className={className} onClick={openModal}>\n\t\t\t\t{buttonText || (mode === \"edit\" ? \"Edit Employee\" : mode === \"delete\" ? \"Delete Employee\" : \"Add Employee\")}\n\t\t\t</button>\n\n\t\t\t{/* Modal */}\n\t\t\t{showModal && (\n\t\t\t\t<>\n\t\t\t\t\t{/* Backdrop */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`modal-backdrop fade ${fadeIn ? \"show\" : \"\"}`}\n\t\t\t\t\t\tstyle={{ transition: \"opacity 0.3s\" }}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`modal fade ${fadeIn ? \"show d-block\" : \"d-none\"}`}\n\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\tstyle={{ transition: \"opacity 0.3s\" }}\n\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\taria-labelledby=\"modal-title\"\n\t\t\t\t\t\taria-hidden={!showModal}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"modal-dialog\">\n\t\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t\t{mode === \"delete\" ? (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"modal-title\">Confirm Delete</h5>\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" onClick={closeModal} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t\t\t\t<p>Are you sure you want to delete this employee?</p>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>{employee?.firstName} {employee?.lastName}</strong>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\n\t\t\t\t\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger\" onClick={() => handleSubmit()}>\n\t\t\t\t\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"modal-title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{mode === \"edit\" ? \"Edit Employee\" : \"Add Employee\"}\n\t\t\t\t\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" onClick={closeModal} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"First Name\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.firstName}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, firstName: e.target.value })\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Last Name\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.lastName}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, lastName: e.target.value })\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t{loadingRoles ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"spinner-border spinner-border-sm\" role=\"status\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">Loading roles...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ms-2\">Loading roles...</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={showNewRoleInput ? \"new\" : modalEmployee.roleId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleRoleChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"0\">Select a role</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{roles.map(role => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={role.id} value={role.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{role.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"new\">+ Create new role</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t{showNewRoleInput && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"New Role Name\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.roleName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, roleName: e.target.value })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired={showNewRoleInput}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\n\t\t\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\" \n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={loadingRoles}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{mode === \"edit\" ? \"Save Changes\" : \"Add Employee\"}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AA2Be,SAAS,cAAc,KAMjB;QANiB,EACrC,QAAQ,EACR,OAAO,KAAK,EACZ,QAAQ,EACR,UAAU,EACV,YAAY,sBAAsB,EACd,GANiB;;IAOrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EACjD,YAAY;QAAE,IAAI;QAAG,WAAW;QAAI,UAAU;QAAI,QAAQ;QAAG,UAAU;IAAG;IAE3E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,+BAA+B;IAC/B,IAAA,0KAAS;mCAAC;YACT,IAAI,WAAW;gBACd;YACD;QACD;kCAAG;QAAC;KAAU;IAEd,MAAM,gBAAgB;QACrB,gBAAgB;QAChB,IAAI;YACH,MAAM,WAAW,MAAM,oIAAG,CAAC,GAAG,CAAC;YAC/B,SAAS,SAAS,IAAI;QACvB,EAAE,OAAO,KAAK;YACb,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACP,SAAU;YACT,gBAAgB;QACjB;IACD;IAEA,2BAA2B;IAC3B,MAAM,YAAY;QACjB,IAAI,SAAS,UAAU,UAAU;gBAGvB;YAFT,iBAAiB;gBAChB,GAAG,QAAQ;gBACX,QAAQ,EAAA,iBAAA,SAAS,IAAI,cAAb,qCAAA,eAAe,EAAE,KAAI;gBAC7B,UAAU;YACX;QACD,OAAO;YACN,iBAAiB;gBAAE,IAAI;gBAAG,WAAW;gBAAI,UAAU;gBAAI,QAAQ;gBAAG,UAAU;YAAG;QAChF;QACA,oBAAoB;QACpB,aAAa;IACd;IAEA,MAAM,aAAa;QAClB,UAAU;QACV,WAAW,IAAM,aAAa,QAAQ;IACvC;IAEA,oBAAoB;IACpB,IAAA,0KAAS;mCAAC;YACT,IAAI,WAAW;gBACd;+CAAW,IAAM,UAAU;8CAAO;YACnC;QACD;kCAAG;QAAC;KAAU;IAEd,MAAM,mBAAmB,IAAA,4KAAW;uDAAC,CAAC;YACrC,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;YAC5B,IAAI,UAAU,OAAO;gBACpB,oBAAoB;gBACpB,iBAAiB;oBAAE,GAAG,aAAa;oBAAE,QAAQ;oBAAG,UAAU;gBAAG;YAC9D,OAAO;gBACN,oBAAoB;gBACpB,iBAAiB;oBAAE,GAAG,aAAa;oBAAE,QAAQ,SAAS;oBAAQ,UAAU;gBAAG;YAC5E;QACD;sDAAG;QAAC;KAAc;IAElB,MAAM,eAAe,IAAA,4KAAW;mDAAC,CAAC;YACjC,IAAI,GAAG,EAAE,cAAc;YACvB,IAAI,SAAS,UAAU;gBACtB,SAAS;YACV,OAAO;oBACmB;gBAAzB,IAAI,oBAAoB,GAAC,0BAAA,cAAc,QAAQ,cAAtB,8CAAA,wBAAwB,IAAI,KAAI;oBACxD,MAAM;oBACN;gBACD;gBACA,SAAS;YACV;YACA;QACD;kDAAG;QAAC;QAAU;QAAM;QAAe;QAAU;KAAiB;IAE9D,qBACC;;0BAEC,6LAAC;gBAAO,WAAW;gBAAW,SAAS;0BACrC,cAAc,CAAC,SAAS,SAAS,kBAAkB,SAAS,WAAW,oBAAoB,cAAc;;;;;;YAI1G,2BACA;;kCAEC,6LAAC;wBACA,WAAW,AAAC,uBAA2C,OAArB,SAAS,SAAS;wBACpD,OAAO;4BAAE,YAAY;wBAAe;;;;;;kCAGrC,6LAAC;wBACA,WAAW,AAAC,cAAgD,OAAnC,SAAS,iBAAiB;wBACnD,UAAU,CAAC;wBACX,OAAO;4BAAE,YAAY;wBAAe;wBACpC,MAAK;wBACL,mBAAgB;wBAChB,eAAa,CAAC;kCAEd,cAAA,6LAAC;4BAAI,WAAU;sCACd,cAAA,6LAAC;gCAAI,WAAU;0CACb,SAAS,yBACT;;sDACC,6LAAC;4CAAI,WAAU;;8DACd,6LAAC;oDAAG,WAAU;oDAAc,IAAG;8DAAc;;;;;;8DAC7C,6LAAC;oDAAO,MAAK;oDAAS,WAAU;oDAAY,SAAS;;;;;;;;;;;;sDAEtD,6LAAC;4CAAI,WAAU;;8DACd,6LAAC;8DAAE;;;;;;8DACH,6LAAC;8DACA,cAAA,6LAAC;;4DAAQ,qBAAA,+BAAA,SAAU,SAAS;4DAAC;4DAAE,qBAAA,+BAAA,SAAU,QAAQ;;;;;;;;;;;;;;;;;;sDAGnD,6LAAC;4CAAI,WAAU;;8DACd,6LAAC;oDAAO,MAAK;oDAAS,WAAU;oDAAoB,SAAS;8DAAY;;;;;;8DAGzE,6LAAC;oDAAO,MAAK;oDAAS,WAAU;oDAAiB,SAAS,IAAM;8DAAgB;;;;;;;;;;;;;iEAMlF,6LAAC;oCAAK,UAAU;;sDACf,6LAAC;4CAAI,WAAU;;8DACd,6LAAC;oDAAG,WAAU;oDAAc,IAAG;8DAC7B,SAAS,SAAS,kBAAkB;;;;;;8DAEtC,6LAAC;oDAAO,MAAK;oDAAS,WAAU;oDAAY,SAAS;;;;;;;;;;;;sDAEtD,6LAAC;4CAAI,WAAU;;8DACd,6LAAC;oDACA,WAAU;oDACV,aAAY;oDACZ,OAAO,cAAc,SAAS;oDAC9B,UAAU,CAAC,IACV,iBAAiB;4DAAE,GAAG,aAAa;4DAAE,WAAW,EAAE,MAAM,CAAC,KAAK;wDAAC;oDAEhE,QAAQ;;;;;;8DAET,6LAAC;oDACA,WAAU;oDACV,aAAY;oDACZ,OAAO,cAAc,QAAQ;oDAC7B,UAAU,CAAC,IACV,iBAAiB;4DAAE,GAAG,aAAa;4DAAE,UAAU,EAAE,MAAM,CAAC,KAAK;wDAAC;oDAE/D,QAAQ;;;;;;gDAGR,6BACA,6LAAC;oDAAI,WAAU;;sEACd,6LAAC;4DAAI,WAAU;4DAAmC,MAAK;sEACtD,cAAA,6LAAC;gEAAK,WAAU;0EAAkB;;;;;;;;;;;sEAEnC,6LAAC;4DAAK,WAAU;sEAAO;;;;;;;;;;;yEAGxB;;sEACC,6LAAC;4DACA,WAAU;4DACV,OAAO,mBAAmB,QAAQ,cAAc,MAAM;4DACtD,UAAU;4DACV,QAAQ;;8EAER,6LAAC;oEAAO,OAAM;8EAAI;;;;;;gEACjB,MAAM,GAAG,CAAC,CAAA,qBACV,6LAAC;wEAAqB,OAAO,KAAK,EAAE;kFAClC,KAAK,IAAI;uEADE,KAAK,EAAE;;;;;8EAIrB,6LAAC;oEAAO,OAAM;8EAAM;;;;;;;;;;;;wDAGpB,kCACA,6LAAC;4DACA,WAAU;4DACV,aAAY;4DACZ,OAAO,cAAc,QAAQ;4DAC7B,UAAU,CAAC,IACV,iBAAiB;oEAAE,GAAG,aAAa;oEAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gEAAC;4DAE/D,UAAU;;;;;;;;;;;;;;sDAMf,6LAAC;4CAAI,WAAU;;8DACd,6LAAC;oDAAO,MAAK;oDAAS,WAAU;oDAAoB,SAAS;8DAAY;;;;;;8DAGzE,6LAAC;oDACA,MAAK;oDACL,WAAU;oDACV,UAAU;8DAET,SAAS,SAAS,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYhD;GA9NwB;KAAA","debugId":null}},
    {"offset": {"line": 526, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/components/Loading.tsx"],"sourcesContent":["\"use client\";\n\nexport default function Loading({ text = \"Loading...\" }: { text?: string }) {\n\treturn (\n\t\t<div className=\"d-flex flex-column justify-content-center align-items-center\" style={{ minHeight: \"200px\" }} >\n\t\t\t<div className=\"spinner-border text-primary\" role=\"status\">\n\t\t\t\t<span className=\"visually-hidden\">{text}</span>\n\t\t\t</div>\n\t\t\t<small className=\"mt-2 text-muted\">{text}</small>\n\t\t</div>\n\t);\n}"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,QAAQ,KAA0C;QAA1C,EAAE,OAAO,YAAY,EAAqB,GAA1C;IAC/B,qBACC,6LAAC;QAAI,WAAU;QAA+D,OAAO;YAAE,WAAW;QAAQ;;0BACzG,6LAAC;gBAAI,WAAU;gBAA8B,MAAK;0BACjD,cAAA,6LAAC;oBAAK,WAAU;8BAAmB;;;;;;;;;;;0BAEpC,6LAAC;gBAAM,WAAU;0BAAmB;;;;;;;;;;;;AAGvC;KATwB","debugId":null}},
    {"offset": {"line": 582, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/app/employees/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useAuthGuard } from \"../../hooks/useAuthGuard\";\nimport api from \"../../services/api\";\nimport EmployeeModal, { Employee } from \"@/components/EmployeeModal\";\nimport Loading from \"@/components/Loading\"\nimport { FaEdit, FaTrash, FaEye } from \"react-icons/fa\";\nimport Link from \"next/link\";\n\nexport default function EmployeesPage() {\n\tconst { token } = useAuth();\n\tconst { user, loading } = useAuthGuard();\n\tconst [employees, setEmployees] = useState<Employee[]>([]);\n\tconst [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n\n\t// Fetch employees from backend\n\tconst fetchEmployees = async () => {\n\t\tif (!token) return;\n\t\ttry {\n\t\t\tconst res = await api.get(\"/api/employees\");\n\t\t\tsetEmployees(res.data);\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Failed to fetch employees\", err);\n\t\t}\n\t};\n\n\t// Fetch on page load or when token/user changes\n\tuseEffect(() => {\n\t\tif (token && user) fetchEmployees();\n\t}, [token, user]);\n\n\tconst handleAction = async (employee: Employee | undefined, mode: \"add\" | \"edit\" | \"delete\") => {\n\t\ttry {\n\t\t\tif (mode === \"add\" && employee) {\n\t\t\t\tawait api.post(\"/api/employees\", employee);\n\t\t\t}\n\t\t\tif (mode === \"edit\" && employee) {\n\t\t\t\tawait api.put(`/api/employees/${employee.id}`, employee);\n\t\t\t}\n\t\t\tif (mode === \"delete\" && employee) {\n\t\t\t\tawait api.delete(`/api/employees/${employee.id}`);\n\t\t\t}\n\n\t\t\t// Refresh list after action\n\t\t\tawait fetchEmployees();\n\t\t} catch (err) {\n\t\t\tconsole.log(\"Action failed\");\n\t\t}\n\t};\n\n\tif (loading) return <Loading text=\"Loading employees...\" />;\n\tif (!user) return <Loading text=\"Redirecting\" />;\n\n\treturn (\n\t\t<div className=\"container mt-5\">\n\t\t\t<h1>Employees</h1>\n\n\t\t\t{/* Add Employee Button + Modal */}\n\t\t\t<EmployeeModal mode=\"add\" onSubmit={(emp) => handleAction(emp, \"add\")} />\n\n\t\t\t{/* Employees Table */}\n\t\t\t<table className=\"table mt-3\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope=\"col\">Name</th>\n\t\t\t\t\t\t<th scope=\"col\">Last Name</th>\n\t\t\t\t\t\t<th scope=\"col\">Role</th>\n\t\t\t\t\t\t<th scope=\"col\">Actions</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{employees.map((emp) => (\n\t\t\t\t\t\t<tr key={emp.id}>\n\t\t\t\t\t\t\t<td>{emp.firstName}</td>\n\t\t\t\t\t\t\t<td>{emp.lastName}</td>\n\t\t\t\t\t\t\t<td>{emp.role?.name || \"No Role Assigned\"}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<Link href={`/employees/${emp.id}`}>\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary btn-sm me-2\">\n\t\t\t\t\t\t\t\t\t\t<FaEye /> View Employee\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<EmployeeModal\n\t\t\t\t\t\t\t\t\tmode=\"edit\"\n\t\t\t\t\t\t\t\t\temployee={emp}\n\t\t\t\t\t\t\t\t\tonSubmit={(emp) => handleAction(emp, \"edit\")}\n\t\t\t\t\t\t\t\t\tbuttonText={<><FaEdit /> Edit </>}\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-success btn-sm me-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<EmployeeModal\n\t\t\t\t\t\t\t\t\tmode=\"delete\"\n\t\t\t\t\t\t\t\t\temployee={emp}\n\t\t\t\t\t\t\t\t\tonSubmit={(emp) => handleAction(emp, \"delete\")}\n\t\t\t\t\t\t\t\t\tbuttonText={<><FaTrash /> Delete </>}\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-danger btn-sm\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}