{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/hooks/useAuthGuard.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * Reusable hook to protect pages from unauthorized access.\n * Redirects to /not_authorized if user is not logged in.\n */\n\nexport const useAuthGuard = () => {\n\tconst { user, loading } = useAuth();\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tif (!loading && !user) {\n\t\trouter.push(\"/not_authorized\");\n\t\t}\n\t}, [user, loading, router]);\n\n\treturn { user, loading };\n};"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAWO,MAAM,eAAe;;IAC3B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAO;IACjC,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACT,IAAI,CAAC,WAAW,CAAC,MAAM;gBACvB,OAAO,IAAI,CAAC;YACZ;QACD;iCAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,OAAO;QAAE;QAAM;IAAQ;AACxB;GAXa;;QACc,4IAAO;QAClB,kJAAS","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/components/EmployeeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\nexport interface Employee {\n\tid: number;\n\tfirstName: string;\n\tlastName: string;\n\trate: number;\n\tworkDays: number;\n}\n\ninterface EmployeeModalProps {\n\temployee?: Employee | null;\n\tisEdit?: boolean;\n\tonSubmit: (employee: Employee) => void;\n\tbuttonText?: string;\n\tclassName?: string;\n}\n\nexport default function EmployeeModal({\n\temployee,\n\tisEdit = false,\n\tonSubmit,\n\tbuttonText = \"Add Employee\",\n\tclassName = \"btn btn-primary mb-3\",\n}: EmployeeModalProps) {\n\tconst [showModal, setShowModal] = useState(false);\n\tconst [modalEmployee, setModalEmployee] = useState<Employee>(\n\t\temployee || { id: 0, firstName: \"\", lastName: \"\", rate: 0, workDays: 0 }\n\t);\n\tconst [fadeIn, setFadeIn] = useState(false);\n\n\tconsole.log(employee);\n\n\tconst openModal = () => {\n\t\tsetModalEmployee(employee || { id: 0, firstName: \"\", lastName: \"\", rate: 0, workDays: 0 });\n\t\tsetShowModal(true);\n\t};\n\n\tconst closeModal = () => {\n\t\tsetFadeIn(false);\n\t\tsetTimeout(() => setShowModal(false), 300);\n\t};\n\n\tuseEffect(() => {\n\t\tif (showModal) {\n\t\t\t  if (employee) {\n    setModalEmployee(employee); // update state when editing\n  } else {\n    setModalEmployee({ id: 0, firstName: \"\", lastName: \"\", rate: 0, workDays: 0 });\n  }\n\t\tsetTimeout(() => setFadeIn(true), 20);\n\t\t}\n\t}, [showModal, employee]);\n\n\tconst handleSubmit = (e: React.FormEvent) => {\n\t\te.preventDefault();\n\t\tonSubmit(modalEmployee);\n\t\tcloseModal();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{/* Open button */}\n\t\t\t<button className={className} onClick={openModal}>\n\t\t\t\t{buttonText}\n\t\t\t</button>\n\n\t\t\t{/* Modal */}\n\t\t\t{showModal && (\n\t\t\t\t<>\n\t\t\t\t{/* Backdrop */}\n\t\t\t\t<div\n\t\t\t\t\tclassName={`modal-backdrop fade ${fadeIn ? \"show\" : \"\"}`}\n\t\t\t\t\tstyle={{ transition: \"opacity 0.3s\" }}\n\t\t\t\t/>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName={`modal fade ${fadeIn ? \"show d-block\" : \"d-none\"}`}\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\tstyle={{ transition: \"opacity 0.3s\" }}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"modal-dialog\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t\t<h5 className=\"modal-title\">{isEdit ? \"Edit Employee\" : \"Add Employee\"}</h5>\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn-close\" onClick={closeModal} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"firstName\"\n\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.firstName}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, firstName: e.target.value })\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Last firstName\"\n\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.lastName}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, lastName: e.target.value })\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control mb-2\"\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Rate\"\n\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.rate}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, rate: parseFloat(e.target.value) })\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Work Days\"\n\t\t\t\t\t\t\t\t\t\tvalue={modalEmployee.workDays}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetModalEmployee({ ...modalEmployee, workDays: parseInt(e.target.value) })\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\n\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\">\n\t\t\t\t\t\t\t\t\t\t{isEdit ? \"Save Changes\" : \"Add Employee\"}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/services/api.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"http://localhost:4000\", // backend base URL\n});\n\n// Add token to requests\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"token\");\n  if (token && config.headers) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nexport default api;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AAEA,wBAAwB;AACxB,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,SAAS,OAAO,OAAO,EAAE;QAC3B,OAAO,OAAO,CAAC,aAAa,GAAG,AAAC,UAAe,OAAN;IAC3C;IACA,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/app/employees/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useAuthGuard } from \"../../hooks/useAuthGuard\";\nimport EmployeeModal from \"../../components/EmployeeModal\";\nimport api from \"../../services/api\";\n\ninterface Employee {\n\tid: number;\n\tfirstName: string;\n\tlastName: string;\n\trate: number;\n\tworkDays: number;\n}\n\nexport default function EmployeesPage() {\n  const { token } = useAuth();\n  const { user, loading } = useAuthGuard();\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n\n  // Fetch employees from backend\n  const fetchEmployees = async () => {\n    if (!token) return;\n    try {\n      const res = await api.get(\"/api/employees\");\n      setEmployees(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch employees\", err);\n    }\n  };\n\n  // Fetch on page load or when token/user changes\n  useEffect(() => {\n    if (token && user) fetchEmployees();\n  }, [token, user]);\n\n  // Callback for modal submit\n  const handleSave = async (employee: Employee) => {\n    try {\n      if (employee.id && employee.id !== 0) {\n        // Edit\n        await api.put(`/api/employees/${employee.id}`, employee);\n      } else {\n        // Add new\n        await api.post(\"/api/employees\", employee);\n      }\n      fetchEmployees(); // refresh list\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save employee\");\n    }\n  };\n\n  // Delete employee\n  const handleDelete = async (id: number) => {\n    if (!confirm(\"Are you sure?\")) return;\n    try {\n      await api.delete(`/api/employees/${id}`);\n      fetchEmployees();\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to delete employee\");\n    }\n  };\n\n  if (loading) return <p>Loading...</p>;\n  if (!user) return <p>Redirecting...</p>;\n\nreturn (\n\t<div className=\"container py-5\">\n\t\t<h2>Employees</h2>\n\t\t\t<EmployeeModal\n\t\t\tonSubmit={handleSave}       // callback to update backend & fetch employees\n\t\t\tbuttonText=\"Add Employee\"   // text on button\n\t\t\t/>\n\t  \t\t<table className=\"table table-striped\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Last Name</th>\n\t\t\t\t\t<th>Rate</th>\n\t\t\t\t\t<th>Work Days</th>\n\t\t\t\t\t<th>Actions</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{employees.map((emp) => (\n\t\t\t\t\t<tr key={emp.id}>\n\t\t\t\t\t\t<td>{emp.firstName}</td>\n\t\t\t\t\t\t<td>{emp.lastName}</td>\n\t\t\t\t\t\t<td>{emp.rate}</td>\n\t\t\t\t\t\t<td>{emp.workDays}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<EmployeeModal\n\t\t\t\t\t\t\temployee={selectedEmployee}\n\t\t\t\t\t\t\tisEdit={true}\n\t\t\t\t\t\t\tonSubmit={handleSave}\n\t\t\t\t\t\t\tbuttonText=\"Edit Employee\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={() => handleDelete(emp.id)}>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</tbody>\n\t\t</table>\n\n\t</div>\n);\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAee,SAAS;;IACtB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,4IAAO;IACzB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,+IAAY;IACtC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAa,EAAE;IACzD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAkB;IAE1E,+BAA+B;IAC/B,MAAM,iBAAiB;QACrB,IAAI,CAAC,OAAO;QACZ,IAAI;YACF,MAAM,MAAM,MAAM,oIAAG,CAAC,GAAG,CAAC;YAC1B,aAAa,IAAI,IAAI;QACvB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACF;IAEA,gDAAgD;IAChD,IAAA,0KAAS;mCAAC;YACR,IAAI,SAAS,MAAM;QACrB;kCAAG;QAAC;QAAO;KAAK;IAEhB,4BAA4B;IAC5B,MAAM,aAAa,OAAO;QACxB,IAAI;YACF,IAAI,SAAS,EAAE,IAAI,SAAS,EAAE,KAAK,GAAG;gBACpC,OAAO;gBACP,MAAM,oIAAG,CAAC,GAAG,CAAC,AAAC,kBAA6B,OAAZ,SAAS,EAAE,GAAI;YACjD,OAAO;gBACL,UAAU;gBACV,MAAM,oIAAG,CAAC,IAAI,CAAC,kBAAkB;YACnC;YACA,kBAAkB,eAAe;QACnC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;IACF;IAEA,kBAAkB;IAClB,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,QAAQ,kBAAkB;QAC/B,IAAI;YACF,MAAM,oIAAG,CAAC,MAAM,CAAC,AAAC,kBAAoB,OAAH;YACnC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;IACF;IAEA,IAAI,SAAS,qBAAO,6LAAC;kBAAE;;;;;;IACvB,IAAI,CAAC,MAAM,qBAAO,6LAAC;kBAAE;;;;;;IAEvB,qBACC,6LAAC;QAAI,WAAU;;0BACd,6LAAC;0BAAG;;;;;;0BACH,6LAAC,iJAAa;gBACd,UAAU;gBACV,YAAW;;;;;;0BAET,6LAAC;gBAAM,WAAU;;kCACnB,6LAAC;kCACA,cAAA,6LAAC;;8CACA,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;;;;;;;;;;;;kCAGN,6LAAC;kCACC,UAAU,GAAG,CAAC,CAAC,oBACf,6LAAC;;kDACA,6LAAC;kDAAI,IAAI,SAAS;;;;;;kDAClB,6LAAC;kDAAI,IAAI,QAAQ;;;;;;kDACjB,6LAAC;kDAAI,IAAI,IAAI;;;;;;kDACb,6LAAC;kDAAI,IAAI,QAAQ;;;;;;kDACjB,6LAAC;;0DACA,6LAAC,iJAAa;gDACd,UAAU;gDACV,QAAQ;gDACR,UAAU;gDACV,YAAW;;;;;;0DAEX,6LAAC;gDAAO,WAAU;gDAAiB,SAAS,IAAM,aAAa,IAAI,EAAE;0DAAG;;;;;;;;;;;;;+BAZjE,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;AAuBpB;GAhGwB;;QACJ,4IAAO;QACC,+IAAY;;;KAFhB","debugId":null}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}