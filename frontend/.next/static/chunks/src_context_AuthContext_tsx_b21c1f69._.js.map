{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\nimport { createContext, useContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\ninterface AuthContextType {\n  token: string | null;\n  user: User | null;\n  login: (token: string) => void;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  token: null,\n  user: null,\n  login: () => {},\n  logout: () => {},\n});\n\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\n  const [token, setToken] = useState<string | null>(null);\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    if (!token) return;\n    const fetchUser = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:4000/me\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setUser(res.data);\n      } catch {\n        setToken(null);\n      }\n    };\n    fetchUser();\n  }, [token]);\n\n  const login = (newToken: string) => setToken(newToken);\n  const logout = () => {\n    setToken(null);\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ token, user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;AAFA;;;AAiBA,MAAM,4BAAc,IAAA,8KAAa,EAAkB;IACjD,OAAO;IACP,MAAM;IACN,OAAO,KAAO;IACd,QAAQ,KAAO;AACjB;AAEO,MAAM,eAAe;QAAC,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAE9C,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,OAAO;YACZ,MAAM;oDAAY;oBAChB,IAAI;wBACF,MAAM,MAAM,MAAM,mJAAK,CAAC,GAAG,CAAC,4BAA4B;4BACtD,SAAS;gCAAE,eAAe,AAAC,UAAe,OAAN;4BAAQ;wBAC9C;wBACA,QAAQ,IAAI,IAAI;oBAClB,EAAE,UAAM;wBACN,SAAS;oBACX;gBACF;;YACA;QACF;iCAAG;QAAC;KAAM;IAEV,MAAM,QAAQ,CAAC,WAAqB,SAAS;IAC7C,MAAM,SAAS;QACb,SAAS;QACT,QAAQ;IACV;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAM;YAAO;QAAO;kBACvD;;;;;;AAGP;GA9Ba;KAAA;AAgCN,MAAM,UAAU;;IAAM,OAAA,IAAA,2KAAU,EAAC;AAAW;IAAtC","debugId":null}}]
}