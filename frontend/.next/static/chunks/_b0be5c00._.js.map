{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/hooks/useAuthGuard.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../context/AuthContext\";\n\n/**\n * Reusable hook to protect pages from unauthorized access.\n * Redirects to /not_authorized if user is not logged in.\n */\n\nexport const useAuthGuard = () => {\n\tconst { user, loading } = useAuth();\n\tconst router = useRouter();\n\n\tuseEffect(() => {\n\t\tif (!loading && !user) {\n\t\trouter.push(\"/not_authorized\");\n\t\t}\n\t}, [user, loading, router]);\n\n\treturn { user, loading };\n};"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAWO,MAAM,eAAe;;IAC3B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,4IAAO;IACjC,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACT,IAAI,CAAC,WAAW,CAAC,MAAM;gBACvB,OAAO,IAAI,CAAC;YACZ;QACD;iCAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,OAAO;QAAE;QAAM;IAAQ;AACxB;GAXa;;QACc,4IAAO;QAClB,kJAAS","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/services/api.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"http://localhost:4000\", // backend base URL\n});\n\n// Add token to requests\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"token\");\n  if (token && config.headers) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nexport default api;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AAEA,wBAAwB;AACxB,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,SAAS,OAAO,OAAO,EAAE;QAC3B,OAAO,OAAO,CAAC,aAAa,GAAG,AAAC,UAAe,OAAN;IAC3C;IACA,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/src/app/employees/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { useAuthGuard } from \"../../hooks/useAuthGuard\";\nimport EmployeeModal from \"../../components/EmployeeModal\";\nimport api from \"../../services/api\";\n\ninterface Employee {\n\tid: number;\n\tfirstName: string;\n\tlastName: string;\n\trate: number;\n\tworkDays: number;\n}\n\nexport default function EmployeesPage() {\n\tconst { token } = useAuth();\n\tconst [employees, setEmployees] = useState<Employee[]>([]);\n\tconst [modalEmployee, setModalEmployee] = useState<Employee | null>(null);\n\tconst [isEdit, setIsEdit] = useState(false);\n\tconst { user, loading } = useAuthGuard();\n\tconst [showModal, setShowModal] = useState(false);\n\n\tconst fetchEmployees = async () => {\n\t\tif (!token) return;\n\t\ttry {\n\t\t\tconst res = await api.get(\"/api/employees\");\n\t\t\tsetEmployees(res.data);\n\t\t} catch (err) {\n\t\t\tconsole.log(\"Failed to fetch employees\");\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\tif (token) {\n\t\tfetchEmployees();\n\t}\n\t}, [token]);\n\n\tconst openModal = (employee?: Employee) => {\n\t\tif (employee) {\n\t\tsetIsEdit(true);\n\t\tsetModalEmployee(employee);\n\t\t} else {\n\t\tsetIsEdit(false);\n\t\tsetModalEmployee({ id: 0, firstName: \"\", lastName: \"\", rate: 0, workDays: 0 });\n\t\t}\n\t\tsetShowModal(true);\n\t};\n\n\tconst closeModal = () => {\n\t\tsetShowModal(false);\n\t\tsetModalEmployee(null);\n\t};\n\n\tconst handleSubmit = async (e: React.FormEvent) => {\n\t\te.preventDefault();\n\t\tif (!modalEmployee) return;\n\n\ttry {\n\t\tlet res;\n\t\tif (isEdit) {\n\t\t\tres = await api.put(`/api/employees/${modalEmployee.id}`, modalEmployee);\n\t\t} else {\n\t\t\tres = await api.post(\"/api/employees\", modalEmployee);\n\t\t}\n\n\t\tif (res.status === 200 || res.status === 201) {\n\t\t\t// setModalEmployee(null);\n\t\t\tfetchEmployees();\n\t\t\tcloseModal();\n\t\t\t// const modalEl = document.getElementById(\"employeeModal\");\n\t\t\t// if (modalEl) {\n\t\t\t// \tconst modal = Modal.getOrCreateInstance(modalEl);\n\t\t\t// \tmodal.hide();\n\t\t\t// }\n\t\t} else {\n\t\t\tconsole.log(\"Something unexpected happened\");\n\t\t}\n\t} catch (err) {\n\tconsole.error(err);\n\tconsole.log(\"Failed to save employee\");\n\t}\n\t};\n\n\tconst handleDelete = async (id: number) => {\n\t\tif (!confirm(\"Are you sure?\")) return;\n\t\ttry {\n\t\t\tawait api.delete(`/api/employees/${id}`);\n\t\t\tfetchEmployees();\n\t\t} catch (err) {\n\t\t\tconsole.log(\"Failed to delete employee\");\n\t\t}\n\t};\n\n\tif (loading) return <p>Checking authentication...</p>;\n\tif (!user) return <p>Redirecting...</p>;\n\nreturn (\n\t<div className=\"container py-5\">\n\t\t<h2>Employees</h2>\n<button className=\"btn btn-primary mb-3\" onClick={() => openModal()}>\n        Add Employee\n      </button>\n\t  \t\t<table className=\"table table-striped\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t<th>Last Name</th>\n\t\t\t\t\t<th>Rate</th>\n\t\t\t\t\t<th>Work Days</th>\n\t\t\t\t\t<th>Actions</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{employees.map((emp) => (\n\t\t\t\t\t<tr key={emp.id}>\n\t\t\t\t\t\t<td>{emp.firstName}</td>\n\t\t\t\t\t\t<td>{emp.lastName}</td>\n\t\t\t\t\t\t<td>{emp.rate}</td>\n\t\t\t\t\t\t<td>{emp.workDays}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn btn-primary me-2\"\n\t\t\t\t\t\t\t// data-bs-toggle=\"modal\"\n\t\t\t\t\t\t\tdata-bs-target=\"#employeeModal\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetModalEmployee(emp);\n\t\t\t\t\t\t\t\tsetIsEdit(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={() => handleDelete(emp.id)}>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</tbody>\n\t\t</table>\n\n\t\t{/* Modal */}\n  {showModal && (\n        <>\n          <div className=\"modal-backdrop fade show\" />\n          <div className=\"modal fade show d-block\" tabIndex={-1}>\n            <div className=\"modal-dialog\">\n              <div className=\"modal-content\">\n                <form onSubmit={handleSubmit}>\n                  <div className=\"modal-header\">\n                    <h5 className=\"modal-title\">{isEdit ? \"Edit Employee\" : \"Add Employee\"}</h5>\n                    <button type=\"button\" className=\"btn-close\" onClick={closeModal} />\n                  </div>\n                  <div className=\"modal-body\">\n                    <input\n                      className=\"form-control mb-2\"\n                      placeholder=\"Name\"\n                      value={modalEmployee?.firstName || \"\"}\n                      onChange={(e) =>\n                        setModalEmployee({ ...modalEmployee!, firstName: e.target.value })\n                      }\n                      required\n                    />\n                    <input\n                      className=\"form-control mb-2\"\n                      placeholder=\"Last Name\"\n                      value={modalEmployee?.lastName || \"\"}\n                      onChange={(e) =>\n                        setModalEmployee({ ...modalEmployee!, lastName: e.target.value })\n                      }\n                      required\n                    />\n                    <input\n                      className=\"form-control mb-2\"\n                      type=\"number\"\n                      placeholder=\"Rate\"\n                      value={modalEmployee?.rate || 0}\n                      onChange={(e) =>\n                        setModalEmployee({ ...modalEmployee!, rate: parseFloat(e.target.value) })\n                      }\n                      required\n                    />\n                    <input\n                      className=\"form-control\"\n                      type=\"number\"\n                      placeholder=\"Work Days\"\n                      value={modalEmployee?.workDays || 0}\n                      onChange={(e) =>\n                        setModalEmployee({ ...modalEmployee!, workDays: parseInt(e.target.value) })\n                      }\n                      required\n                    />\n                  </div>\n                  <div className=\"modal-footer\">\n                    <button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\n                      Close\n                    </button>\n                    <button type=\"submit\" className=\"btn btn-primary\">\n                      {isEdit ? \"Save Changes\" : \"Add Employee\"}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n\t</div>\n);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///Users/iKlejdi/Desktop/construction/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}